(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2dd8dfea"],{"44b1":function(t,a,e){},8800:function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("Dialog",{ref:"dialog",attrs:{"can-return":0!==t.catalogData.category.length||0!==t.catalogData.searchRequest.length},on:{hide:t.onDialogHide,return:t.onDialogReturn}},[""===t.catalogData.category&&""===t.catalogData.searchRequest?e("section",[e("section",{staticClass:"search-wrapper"},[e("div",{staticClass:"search"},[e("input",{ref:"searchInput",attrs:{placeholder:"Поиск Товара",type:"text",autocorrect:"off",autocapitalize:"off"},on:{input:t.onSearchInput,keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.onSearchResultChoose(a.target.value)}}}),0!==t.searchHelperResults.length&&""===t.catalogData.category?e("section",{staticClass:"search-helper"},t._l(t.searchHelperResults,function(a){return e("p",{on:{click:function(e){return t.onSearchResultChoose(a)}}},[t._v(t._s(a))])}),0):t._e()])]),e("CategoryChooseComponent",{ref:"categoryChoose",staticClass:"category-choose-component",attrs:{data:t.rawCategories,basket:t.products,"can-be-ordered":!1},on:{onCategoryChoose:t.onCategoryChoose}})],1):t._e(),""!==t.catalogData.category||""!==t.catalogData.searchRequest?e("CatalogComponent",{staticClass:"catalog-component",attrs:{"category-id":t.catalogData.category,"sub-category-id":t.catalogData.subCategory,"search-request":t.catalogData.searchRequest,"button-text":"Добавить","basket-data":t.products},on:{buy:t.onBuy}}):t._e(),e("Basket",{attrs:{data:t.products,canBeOrdered:!1,"can-be-cleared":!1}})],1)},s=[],c=(e("ac6a"),e("f499")),r=e.n(c),n=(e("7514"),e("cebc")),i=e("2f62"),u=e("be12"),l=e("4ccc"),h=e("e5e2"),g=e("2017"),p=e("d175"),d=e("7b6f"),f=e("c2f7"),y=e("51bd"),C=e("bd71"),b={name:"WaybillEditingDialog",components:{Basket:C["a"],CatalogComponent:y["a"],CategoryChooseComponent:f["a"],Dialog:g["a"]},props:{productsData:{type:Array,required:!0}},data:function(){return{catalogData:{category:"",subCategory:"",searchRequest:"",buttonText:"Добавить"},searchHelperResults:[],products:[]}},methods:Object(n["a"])({},Object(i["b"])(h["a"].catalog,[l["a"].catalog.LOAD_CATEGORIES]),Object(i["d"])(h["a"].catalog,[u["a"].catalog.SET_IS_BASKET_MINIMIZED]),{onBuy:function(t){var a=this.products.find(function(a){return a.id===t.id});if(a)a.boughtQuantity++;else{var e=JSON.parse(r()(t));e.boughtQuantity=1,e.isValid=!0,this.products.push(e)}this.setIsBasketMinimized(!1)},onSearchInput:function(t){var a=this,e=t.target.value;0!==e.length?p["a"].getSearchHelper(e).then(function(t){null!==t?t.json().then(function(t){a.searchHelperResults=t}):a.searchHelperResults=[]}):0!==this.searchHelperResults.length&&(this.searchHelperResults=[])},onSearchResultChoose:function(t){this.catalogData.searchRequest=t,this.searchHelperResults=[]},onCategoryChoose:function(t){this.catalogData.category=t.id,this.catalogData.subCategory=t.subId,this.searchHelperResults=[]},onDialogReturn:function(){this.$store.dispatch(h["a"].catalog+"/"+d["d"]),this.catalogData.category="",this.catalogData.subCategory="",this.catalogData.searchRequest=""},onDialogHide:function(){this.catalogData.category="",this.catalogData.subCategory="",this.catalogData.searchRequest=""}}),computed:Object(n["a"])({},Object(i["c"])(h["a"].catalog,["categories"]),{rawCategories:function(){var t=JSON.parse(r()(this.categories));return t.forEach(function(t){t.isExpanded&&(t.isExpanded=!1)}),t}}),mounted:function(){this.products=this.$props.productsData?this.$props.productsData:[],0===this.categories.length&&this.loadCategories()}},D=b,R=(e("cf5e"),e("2877")),k=Object(R["a"])(D,o,s,!1,null,"87a95d84",null);a["default"]=k.exports},cf5e:function(t,a,e){"use strict";var o=e("44b1"),s=e.n(o);s.a}}]);
//# sourceMappingURL=chunk-2dd8dfea.cce794af.js.map