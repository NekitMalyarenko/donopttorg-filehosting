(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["register"],{"0c38":function(s,t,i){},3278:function(s,t,i){"use strict";var e=function(){var s=this,t=s.$createElement,i=s._self._c||t;return i("section",{staticClass:"form"},[s._t("default")],2)},a=[],r={name:"Form"},n=r,o=(i("4ebd"),i("2877")),l=Object(o["a"])(n,e,a,!1,null,"38e95d3d",null);t["a"]=l.exports},"4ebd":function(s,t,i){"use strict";var e=i("cafa"),a=i.n(e);a.a},"5d63":function(s,t,i){"use strict";var e=i("0c38"),a=i.n(e);a.a},6211:function(s,t,i){"use strict";var e=i("7df8"),a=i.n(e);a.a},"73cf":function(s,t,i){"use strict";i.r(t);var e=function(){var s=this,t=s.$createElement,i=s._self._c||t;return i("section",{staticClass:"layout"},[s.isRegistrationSuccessful||s.isAuthorized?s._e():i("Form",[i("h1",{staticClass:"title"},[s._v("Регистрация")]),i("div",{staticClass:"item"},[i("MDInput",{ref:"login",attrs:{label:"Почта"},on:{input:s.onInput}})],1),i("div",{staticClass:"item"},[i("MDPasswordInput",{ref:"password",attrs:{label:"Пароль"},on:{input:s.onInput}})],1),i("div",{staticClass:"item"},[i("MDPasswordInput",{ref:"confirmPassword",attrs:{label:"Повторите Пароль"},on:{input:s.onInput}})],1),i("div",{staticClass:"item"},[i("MDInput",{ref:"requisites",attrs:{label:"Реквизиты"},on:{input:s.onInput}})],1),0!==s.err.length?i("div",{staticClass:"item"},[i("p",{staticClass:"error"},[s._v(s._s(s.err))])]):s._e(),i("div",{staticClass:"item bottom-item"},[s.isRegistering?s._e():i("button",{on:{click:s.register}},[s._v("Регистрация")]),s.isRegistering?i("LoadingSpinner"):s._e()],1)]),s.isRegistrationSuccessful?i("Form",[i("h1",{staticClass:"title"},[s._v("Ваша заявка была успешна принята. Ожидайте ее подтверждение.")])]):s._e(),s.isAuthorized?i("Form",[i("h1",{staticClass:"title"},[s._v("Вы уже вошли в аккаунт")])]):s._e()],1)},a=[],r=(i("7514"),i("e072")),n=i("7b58"),o=i("d421"),l=i("3278"),d=i("6149"),u=i("3786"),c=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,f={name:"Register",components:{Form:l["a"],MDInput:n["a"],LoadingSpinner:r["a"],MDPasswordInput:o["a"]},data:function(){return{isAuthorized:!1,isRegistrationSuccessful:!1,isRegistering:!1,err:"",incorrectData:[]}},methods:{onInput:function(){var s=this;if(this.$refs.login.isValid=!this.$refs.login.isEmpty,this.$refs.login.isValid&&(this.$refs.login.isValid=c.test(String(this.$refs.login.data).toLowerCase())),this.$refs.password.isValid=!this.$refs.password.isEmpty,this.$refs.confirmPassword.isValid=!this.$refs.confirmPassword.isEmpty,this.$refs.requisites.isValid=!this.$refs.requisites.isEmpty,this.$refs.password.data===this.$refs.confirmPassword.data&&this.$refs.password.isValid){if(this.err="",!this.$refs.login.isValid)return;var t=this.incorrectData.find(function(t){return t.login===s.$refs.login.data});t?(this.err="Почта уже зарегистрирована.",this.$refs.login.isValid=!1):this.$refs.password.data.length<7&&(this.err="Пароль должен состоят минимум из 7 знаков.",this.$refs.password.isValid=!1)}else this.$refs.password.data!==this.$refs.confirmPassword.data&&this.$refs.password.isValid&&(this.err="Пароли должны совпадать.",this.$refs.password.isValid=!1,this.$refs.confirmPassword.isValid=!1)},register:function(){var s=this;if(this.isFormValid){this.isRegistering=!0;var t=this.$refs.login.data,i=this.$refs.password.data,e=this.$refs.requisites.data;u["a"].register(t,i,e).then(function(t){s.isRegistering=!1,t.ok?s.isRegistrationSuccessful=!0:(console.error({res:t}),s.err="Произошла ошибка на сервере. Попробуйте позже.")}).catch(function(t){s.isRegistering=!1,console.error({err:t}),s.err="Произошла ошибка на сервере. Попробуйте позже."})}}},computed:{isFormValid:function(){return!this.isAuthorized&&(this.$refs.login.isValid&&this.$refs.password.isValid&&this.$refs.confirmPassword.isValid&&this.$refs.requisites.isValid)}},mounted:function(){this.isAuthorized=d["a"].has(),this.isAuthorized&&this.onInput()}},p=f,h=(i("6211"),i("2877")),m=Object(h["a"])(p,e,a,!1,null,"602570da",null);t["default"]=m.exports},"7b58":function(s,t,i){"use strict";var e=function(){var s=this,t=s.$createElement,i=s._self._c||t;return i("section",{staticClass:"md-input-container",class:{"not-valid":!s.isValid}},[i("section",{staticClass:"md-input",class:{"not-empty":!s.isEmpty}},[s.isTextArea?i("textarea",{attrs:{rows:"2",disabled:!s.isEditable},on:{input:s.onInput}}):i("input",{attrs:{type:"text",disabled:!s.isEditable},on:{input:s.onInput}}),i("span",{staticClass:"bar"}),i("label",[s._v(s._s(s.label))])])])},a=[],r={name:"MDInput",props:{label:{type:String,required:!0},isTextArea:{type:Boolean,default:!1}},data:function(){return{isEmpty:!0,isValid:!0,isEditable:!0,data:""}},methods:{onInput:function(s){var t=s.target.value.length;this.isEmpty=0===t,this.data=s.target.value,this.$emit("input")}}},n=r,o=(i("5d63"),i("2877")),l=Object(o["a"])(n,e,a,!1,null,"678effa7",null);t["a"]=l.exports},"7df8":function(s,t,i){},b1c6:function(s,t,i){"use strict";var e=i("dade"),a=i.n(e);a.a},cafa:function(s,t,i){},d421:function(s,t,i){"use strict";var e=function(){var s=this,t=s.$createElement,i=s._self._c||t;return i("section",{staticClass:"md-input-container",class:{"not-valid":!s.isValid}},[i("section",{staticClass:"md-input",class:{"not-empty":!s.isEmpty}},[i("input",{attrs:{type:s.isShown?"text":"password",disabled:!s.isEditable},on:{input:s.onInput}}),s.isEmpty?s._e():i("img",{attrs:{src:s.isShown?"/svgs/eye-slash.svg":"/svgs/eye.svg"},on:{click:function(t){s.isShown=!s.isShown}}}),i("span",{staticClass:"bar"}),i("label",[s._v(s._s(s.label))])])])},a=[],r={name:"MDPasswordInput",props:{label:{type:String,required:!0},isShownProp:{type:Boolean,default:!1}},data:function(){return{isEmpty:!0,isValid:!0,isShown:!1,isEditable:!0,data:""}},methods:{onInput:function(s){var t=s.target.value.length;this.isEmpty=0===t,this.data=s.target.value,this.$emit("input")}},mounted:function(){this.isShown=this.isShownProp}},n=r,o=(i("b1c6"),i("2877")),l=Object(o["a"])(n,e,a,!1,null,"44ad3ae4",null);t["a"]=l.exports},dade:function(s,t,i){}}]);
//# sourceMappingURL=register.291be326.js.map