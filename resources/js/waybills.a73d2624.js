(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["waybills"],{"0043":function(t,e,i){"use strict";i.d(e,"a",function(){return r});var n=i("365c"),r={getWaybills:function(t){return n["a"].protectedPost("/waybills/getWaybills",{itemsPerPage:t})},getMoreWaybills:function(t,e){return n["a"].protectedPost("/waybills/getMoreWaybills",{lastId:t,itemsPerPage:e})},getExtendedWaybill:function(t){return n["a"].protectedPost("/waybills/getExtendedWaybill",{waybillId:t})},updateWaybill:function(t,e,i){return n["a"].protectedPost("/waybills/updateWaybill",{waybillId:t,comment:e,products:i})},deleteWaybill:function(t){return n["a"].protectedPost("/waybills/deleteWaybill",{waybillId:t})}}},"06cf":function(t,e,i){},"13f9":function(t,e,i){"use strict";var n=i("06cf"),r=i.n(n);r.a},"1af6":function(t,e,i){var n=i("63b6");n(n.S,"Array",{isArray:i("9003")})},"20fd":function(t,e,i){"use strict";var n=i("d9f6"),r=i("aebd");t.exports=function(t,e,i){e in t?n.f(t,e,r(0,i)):t[e]=i}},"549b":function(t,e,i){"use strict";var n=i("d864"),r=i("63b6"),a=i("241e"),o=i("b0dc"),s=i("3702"),l=i("b447"),c=i("20fd"),u=i("7cd6");r(r.S+r.F*!i("4ee1")(function(t){Array.from(t)}),"Array",{from:function(t){var e,i,r,f,d=a(t),v="function"==typeof this?this:Array,b=arguments.length,y=b>1?arguments[1]:void 0,h=void 0!==y,p=0,m=u(d);if(h&&(y=n(y,b>2?arguments[2]:void 0,2)),void 0==m||v==Array&&s(m))for(e=l(d.length),i=new v(e);e>p;p++)c(i,p,h?y(d[p],p):d[p]);else for(f=m.call(d),i=new v;!(r=f.next()).done;p++)c(i,p,h?o(f,y,[r.value,p],!0):r.value);return i.length=p,i}})},"54a1":function(t,e,i){i("6c1c"),i("1654"),t.exports=i("95d5")},"75fc":function(t,e,i){"use strict";var n=i("a745"),r=i.n(n);function a(t){if(r()(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}var o=i("774e"),s=i.n(o),l=i("c8bb"),c=i.n(l);function u(t){if(c()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return s()(t)}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function d(t){return a(t)||u(t)||f()}i.d(e,"a",function(){return d})},"774e":function(t,e,i){t.exports=i("d2d5")},"85fe":function(t,e,i){"use strict";(function(t){var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=(function(){function t(t){this.value=t}function e(e){var i,n;function r(t,e){return new Promise(function(r,o){var s={key:t,arg:e,resolve:r,reject:o,next:null};n?n=n.next=s:(i=n=s,a(t,e))})}function a(i,n){try{var r=e[i](n),s=r.value;s instanceof t?Promise.resolve(s.value).then(function(t){a("next",t)},function(t){a("throw",t)}):o(r.done?"return":"normal",r.value)}catch(l){o("throw",l)}}function o(t,e){switch(t){case"return":i.resolve({value:e,done:!0});break;case"throw":i.reject(e);break;default:i.resolve({value:e,done:!1});break}i=i.next,i?a(i.key,i.arg):n=null}this._invoke=r,"function"!==typeof e.return&&(this.return=void 0)}"function"===typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)}}(),function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}),r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)};function o(t){var e=void 0;return e="function"===typeof t?{callback:t}:t,e}function s(t,e){var i=void 0,n=void 0,r=void 0,o=function(o){for(var s=arguments.length,l=Array(s>1?s-1:0),c=1;c<s;c++)l[c-1]=arguments[c];r=l,i&&o===n||(n=o,clearTimeout(i),i=setTimeout(function(){t.apply(void 0,[o].concat(a(r))),i=0},e))};return o._clear=function(){clearTimeout(i)},o}function l(t,e){if(t===e)return!0;if("object"===("undefined"===typeof t?"undefined":i(t))){for(var n in t)if(!l(t[n],e[n]))return!1;return!0}return!1}var c=function(){function t(e,i,r){n(this,t),this.el=e,this.observer=null,this.frozen=!1,this.createObserver(i,r)}return r(t,[{key:"createObserver",value:function(t,e){var i=this;this.observer&&this.destroyObserver(),this.frozen||(this.options=o(t),this.callback=this.options.callback,this.callback&&this.options.throttle&&(this.callback=s(this.callback,this.options.throttle)),this.oldResult=void 0,this.observer=new IntersectionObserver(function(t){var e=t[0];if(i.callback){var n=e.isIntersecting&&e.intersectionRatio>=i.threshold;if(n===i.oldResult)return;i.oldResult=n,i.callback(n,e),n&&i.options.once&&(i.frozen=!0,i.destroyObserver())}},this.options.intersection),e.context.$nextTick(function(){i.observer.observe(i.el)}))}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&this.options.intersection.threshold||0}}]),t}();function u(t,e,i){var n=e.value;if("undefined"===typeof IntersectionObserver)console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var r=new c(t,n,i);t._vue_visibilityState=r}}function f(t,e,i){var n=e.value,r=e.oldValue;if(!l(n,r)){var a=t._vue_visibilityState;a?a.createObserver(n,i):u(t,{value:n},i)}}function d(t){var e=t._vue_visibilityState;e&&(e.destroyObserver(),delete t._vue_visibilityState)}var v={bind:u,update:f,unbind:d};function b(t){t.directive("observe-visibility",v)}var y={version:"0.4.3",install:b},h=null;"undefined"!==typeof window?h=window.Vue:"undefined"!==typeof t&&(h=t.Vue),h&&h.use(y),e["a"]=y}).call(this,i("c8ba"))},"95d5":function(t,e,i){var n=i("40c3"),r=i("5168")("iterator"),a=i("481b");t.exports=i("584a").isIterable=function(t){var e=Object(t);return void 0!==e[r]||"@@iterator"in e||a.hasOwnProperty(n(e))}},a745:function(t,e,i){t.exports=i("f410")},bd5e:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"layout"},[t.hasWaybills?i("section",[i("div",{staticClass:"list"},t._l(t.activeWaybills,function(e){return i("div",{key:e.id,staticClass:"item",on:{click:function(i){return t.itemClickHandler(e)}}},[i("div",{staticClass:"head"},[i("p",{staticClass:"title"},[t._v("#"+t._s(e.numberInvoice))]),e.deliveryDate?i("p",{staticClass:"delivery-date"},[t._v(t._s(e.deliveryDate))]):i("p",{staticClass:"delivery-date"},[t._v("Резерв")])]),i("div",{staticClass:"content"},[e.isPaid?i("p",{staticClass:"is-paid is-paid-true"},[t._v("Оплачен")]):t._e(),e.isPaid?t._e():i("p",{staticClass:"is-paid is-paid-false"},[t._v("Не оплачен")]),i("p",{staticClass:"total-price"},[t._v(t._s(e.totalPrice)+" ₴")])])])}),0),0!==t.inactiveWaybills.length?i("section",[i("p",{staticClass:"inner-list-text"},[t._v("Доставленные")]),i("div",{staticClass:"list inactive"},t._l(t.inactiveWaybills,function(e){return i("div",{key:e.id,staticClass:"item",on:{click:function(i){return t.itemClickHandler(e)}}},[i("div",{staticClass:"head"},[i("p",{staticClass:"title"},[t._v("#"+t._s(e.numberInvoice))]),e.deliveryDate?i("p",{staticClass:"delivery-date"},[t._v(t._s(e.deliveryDate))]):i("p",{staticClass:"delivery-date"},[t._v("Резерв")])]),i("div",{staticClass:"content"},[e.isPaid?i("p",{staticClass:"is-paid is-paid-true"},[t._v("Оплачен")]):t._e(),e.isPaid?t._e():i("p",{staticClass:"is-paid is-paid-false"},[t._v("Не оплачен")]),i("p",{staticClass:"total-price"},[t._v(t._s(e.totalPrice)+" ₴")])]),i("div",{staticClass:"blur"})])}),0)]):t._e()]):t._e(),i("div",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:t.onBottomReached,expression:"onBottomReached"}],staticClass:"bottom"},[t.isLoading?i("LoadingSpinner"):t._e()],1)])},r=[],a=i("75fc"),o=(i("ac6a"),i("96cf"),i("3b8d")),s=i("e072"),l={getCurrentDate:function(){return new Date},toCoolDate:function(t){var e=t.getMonth()+1;e<10&&(e="0"+e);var i=t.getDate();return i<10&&(i="0"+i),"".concat(i,".").concat(e,".").concat(t.getFullYear())},unixTimeStampToDate:function(t){return new Date(1e3*t)},isAfter:function(t,e){return t.getTime()>e.getTime()}},c=i("0043"),u=i("2b0e"),f=i("85fe");u["a"].use(f["a"]);var d=10,v={name:"Waybills",components:{LoadingSpinner:s["a"]},data:function(){return{waybills:[],hasMoreToLoad:!1,isLoading:!1}},methods:{loadWaybills:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){var e,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.isLoading=!0,t.next=3,c["a"].getWaybills(d);case 3:if(e=t.sent,!e.ok){t.next=11;break}return t.next=7,e.json();case 7:i=t.sent,i.data.forEach(function(t){t.deliveryDateUnix&&(t.deliveryDate=l.toCoolDate(l.unixTimeStampToDate(t.deliveryDateUnix)))}),this.waybills=i.data,this.hasMoreToLoad=i.hasMoreToLoad;case 11:this.isLoading=!1;case 12:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),loadMoreWaybills:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){var e,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.isLoading=!0,t.next=3,c["a"].getMoreWaybills(this.lastWaybillId,d);case 3:if(e=t.sent,!e.ok){t.next=11;break}return t.next=7,e.json();case 7:i=t.sent,i.data.forEach(function(t){t.deliveryDateUnix&&(t.deliveryDate=l.toCoolDate(l.unixTimeStampToDate(t.deliveryDateUnix)))}),this.waybills=[].concat(Object(a["a"])(this.waybills),Object(a["a"])(i.data)),this.hasMoreToLoad=i.hasMoreToLoad;case 11:this.isLoading=!1;case 12:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),itemClickHandler:function(t){this.$router.push({name:"waybill",params:{id:t.id}})},onBottomReached:function(t){var e=this;!this.isLoading||this.hasWaybills?!this.isLoading&&t&&this.hasWaybills&&this.hasMoreToLoad&&(this.hasMoreToLoad=!1,this.loadMoreWaybills()):setTimeout(function(){return e.onBottomReached(!0)},300)}},computed:{activeWaybills:function(){return this.prettyWaybills.filter(function(t){return!t.deliveryDateUnix||l.isAfter(l.unixTimeStampToDate(t.deliveryDateUnix),l.getCurrentDate())})},inactiveWaybills:function(){return this.prettyWaybills.filter(function(t){return!!t.deliveryDateUnix&&!l.isAfter(l.unixTimeStampToDate(t.deliveryDateUnix),l.getCurrentDate())})},hasWaybills:function(){return 0!==this.waybills.length},lastWaybillId:function(){return 0!==this.waybills.length?this.waybills[this.waybills.length-1].id:-1},prettyWaybills:function(){return this.waybills.map(function(t){return t.isActive=!t.deliveryDateUnix||l.isAfter(l.unixTimeStampToDate(t.deliveryDateUnix),l.getCurrentDate()),t})}},mounted:function(){this.hasMoreToLoad=!1,this.waybills=[],this.loadWaybills()}},b=v,y=(i("13f9"),i("2877")),h=Object(y["a"])(b,n,r,!1,null,"78bf82d9",null);e["default"]=h.exports},c8bb:function(t,e,i){t.exports=i("54a1")},d2d5:function(t,e,i){i("1654"),i("549b"),t.exports=i("584a").Array.from},f410:function(t,e,i){i("1af6"),t.exports=i("584a").Array.isArray}}]);
//# sourceMappingURL=waybills.a73d2624.js.map