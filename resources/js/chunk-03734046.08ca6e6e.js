(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-03734046"],{"1c6a":function(t,e,n){},"247d":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"layout"},[t.$route&&"catalog"===t.$route.name?n("h1",{staticClass:"title"},[t._v(t._s(t.categoryId))]):t._e(),t.$route&&"search"===t.$route.name?n("h1",{staticClass:"title"},[t._v('"'+t._s(t.searchRequest)+'"')]):t._e(),"catalog"!==t.$route.name&&"catalogWithSub"!==t.$route.name&&!t.isComponent||0===t.products.length||t.isLoading?t._e():n("div",{staticClass:"search-result-wrapper",style:{"margin-bottom":t.searchResultWrapperMarginBottom},attrs:{id:"grid"}},t._l(t.products,function(e){return n("Card",{key:e.id,attrs:{id:e.id,name:e.name,options:e.options,"children-data":e.childrenData,"button-text":t.buttonText},on:{buy:t.onBuy}})}),1),"search"!==t.$route.name&&!t.isComponent||t.lastSearchRequest!==t.searchRequest||t.isLoading?t._e():n("div",{staticClass:"search-result-wrapper",style:{"margin-bottom":t.searchResultWrapperMarginBottom},attrs:{id:"grid"}},t._l(t.searchResults,function(e){return n("Card",{key:e.id,attrs:{id:e.id,name:e.name,options:e.options,"children-data":e.childrenData,"button-text":t.buttonText},on:{buy:t.onBuy}})}),1),n("div",{staticClass:"spinner"},[t.isLoading?n("LoadingSpinner"):t._e()],1),n("Basket",{attrs:{data:t.isComponent?t.data:t.basket,"can-be-ordered":!t.isComponent},on:{ordering:t.onOrdering,remove:t.onRemove}})],1)},a=[],o=(n("386d"),n("7f7f"),n("cebc")),r=n("2f62"),s=n("e5e2"),c=n("4ccc"),u=n("be12"),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card"},[n("div",{staticClass:"header"},[n("p",{staticClass:"title",class:{"title-minified":t.name.length>45}},[t._v(t._s(t.name))]),0!==t.optionsLayers.length?n("section",{staticClass:"title-sub-container"},t._l(t.optionsLayers,function(e,i){return n("section",{key:i,staticClass:"option"},[e.length>1?n("SimpleDroplist",{attrs:{data:e},on:{choose:function(e){return t.changeChosenOption(i,e)}}}):n("p",[t._v(t._s(e[0]))])],1)}),0):t._e()]),n("LazyLoadImage",{staticClass:"main-image",attrs:{url:t.currentImage},on:{click:t.imageHandler}}),0!==t.lastOptionLayer.data.length?n("div",{staticClass:"content",style:t.cardContentStyle},t._l(t.lastOptionLayer.data,function(e,i){return n("div",{key:e.name,staticClass:"option"},[n("p",{staticClass:"name",class:{chosen:i===t.lastOptionLayer.chosenIndex},on:{click:function(e){t.lastOptionLayer.chosenIndex=i}}},[t._v("\n                "+t._s(e.name)+"\n            ")]),n("p",{staticClass:"quantity",class:{"chosen-quantity":i===t.lastOptionLayer.chosenIndex},on:{click:function(e){t.lastOptionLayer.chosenIndex=i}}},[t._v("\n                "+t._s(t.childrenData[e.id].isCountInStockTooBig?">"+t.childrenData[e.id].countInStock:t.childrenData[e.id].countInStock)+" "),n("span",[t._v("шт.")])])])}),0):t._e(),n("div",{staticClass:"bottom"},[n("MDRaisedButton",{attrs:{text:t.buttonText},on:{click:function(e){return t.buyHandler()}}}),0!==t.optionsLayers.length?n("p",{staticClass:"price"},[t._v(t._s(t.currentOption.priceRetail)+" ₴")]):t._e()],1)],1)},h=[],d=(n("ac6a"),n("c5f6"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"droplist-container",on:{mouseup:function(e){t.isVisible=!0},mouseleave:function(e){t.isVisible=!1}}},[n("p",{staticClass:"trigger"},[t._v("\n        "+t._s(t.$props.data[t.chosenIndex])+"\n        "),t.isVisible?n("i",{staticClass:"fas fa-caret-up"}):n("i",{staticClass:"fas fa-caret-down"})]),t.isVisible?n("div",{staticClass:"content"},t._l(t.dataToRender,function(e){return n("p",{key:e,on:{click:function(n){return t.clickHandler(e)}}},[t._v(t._s(e))])}),0):t._e()])}),p=[],f={name:"SimpleDroplist",props:{data:{type:Array,required:!0}},data:function(){return{chosenIndex:0,isVisible:!1}},methods:{clickHandler:function(t){for(var e=0;e<this.$props.data.length;e++)t===this.$props.data[e]&&(this.chosenIndex=e,this.$emit("choose",e),this.isVisible=!1)}},computed:{dataToRender:function(){return this.data}},watch:{data:function(t,e){if(t.length===e.length)for(var n=0;n<t.length;n++)t[n]!==e[n]&&(this.chosenIndex=0);else this.chosenIndex=0}}},y=f,b=(n("ac78"),n("2877")),m=Object(b["a"])(y,d,p,!1,null,"6ee7184c",null),g=m.exports,v=n("f8b7"),C=n("06b1"),O=n("7032"),_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("img",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:t.onVisibilityChanged,expression:"onVisibilityChanged"}],ref:"img",style:{width:t.width+"px",height:t.height+"px"},attrs:{url:t.url},on:{click:function(e){return t.$emit("click")}}})},k=[],I=n("2b0e"),L=n("85fe");I["a"].use(L["a"]);var $={name:"LazyLoadImage",data:function(){return{isLoaded:!1,isVisible:!1}},props:{url:{type:String,required:!0},width:{type:Number},height:{type:Number}},methods:{callback:function(t){this.isLoaded=!0,this.$refs.img.src=t},onVisibilityChanged:function(t){this.isVisible=t,t&&!this.isLoaded&&0!==this.url.length&&this.loadImage()},loadImage:function(){v["a"].$emit(v["b"].lazyLoadImage,{url:this.url,callback:this.callback,priority:1})}},watch:{url:function(t){this.isVisible&&(0!==t.length?this.loadImage():this.$refs.img.src="")}}},x=$,S=(n("bff5"),Object(b["a"])(x,_,k,!1,null,"2e7638ec",null)),w=S.exports,R={name:"CatalogCard",components:{LazyLoadImage:w,MDRaisedButton:O["a"],SimpleDroplist:g},props:{id:{type:Number,required:!0},name:{type:String,required:!0},options:{type:Array,required:!0},childrenData:{type:Object,required:!0},buttonText:{type:String,required:!0}},data:function(){return{route:[],optionsLayers:[],lastOptionLayer:{chosenIndex:0,data:[]},cardContentStyle:{gridTemplateColumns:"repeat(auto-fit, minmax(30px, max-content))"}}},methods:{changeChosenOption:function(t,e){this.route[t]=e,this.reCalculateOptionsLayer()},imageHandler:function(){v["a"].$emit(v["b"].showImagePreview,C["a"].fullSizeImageURL(this.currentOption.id))},buyHandler:function(){this.$emit("buy",{id:this.currentOption.id,name:this.currentOption.fullName,size:this.currentOption.size,color:this.currentOption.color,hasImage:this.currentOption.hasImage,price:this.currentOption.priceRetail})},reCalculateOptionsLayer:function(){for(var t=this,e=[],n=[],i=this.options,a=0;a<this.route.length+1;a++)a!==this.route.length?function(){var n=[];i.forEach(function(t){n.push(t.name)}),e.push(n),i[t.route[a]]?i=i[t.route[a]].options:(i=i[t.route[0]].options,t.options[a]=0)}():(n=i,this.lastOptionLayer.chosenIndex>n.length-1&&(this.lastOptionLayer.chosenIndex=0));this.optionsLayers=e,this.lastOptionLayer.data=n,this.reCalculateMaxOptionWidth()},calculateOptionsLayer:function(){var t=[],e=[],n=[],i=this.options;while(1){if(!(i[0].options&&i[0].options.length>0)){e=i;break}(function(){var e=[];i.forEach(function(t){e.push(t.name)}),t.push(e),n.push(0),i=i[0].options})()}this.optionsLayers=t,this.route=n,this.lastOptionLayer.data=e,this.reCalculateMaxOptionWidth()},reCalculateMaxOptionWidth:function(){var t=0,e=9;this.lastOptionLayer&&this.lastOptionLayer.data&&(this.lastOptionLayer.data.forEach(function(n){n.name.length*e>t&&(t=n.name.length*e)}),this.cardContentStyle.gridTemplateColumns="repeat(auto-fit, minmax("+t+"px, max-content))")}},computed:{currentImage:function(){return this.hasImage?C["a"].imageURL(this.currentOption.id):""},hasImage:function(){return this.currentOption&&this.currentOption.hasImage},currentOption:function(){if(0!==this.lastOptionLayer.data.length)return this.childrenData[this.lastOptionLayer.data[this.lastOptionLayer.chosenIndex].id]}},mounted:function(){this.calculateOptionsLayer()}},T=R,q=(n("ad3d"),Object(b["a"])(T,l,h,!1,null,"696c7a74",null)),E=q.exports,B=n("e072"),V={name:"Catalog",components:{LoadingSpinner:B["a"],Basket:function(){return n.e("chunk-856b10de").then(n.bind(null,"deaa"))},Card:E},data:function(){return{isLoading:!0}},props:{isComponent:{type:Boolean,default:!1},data:{type:Array,default:null},category:{type:String,default:""},parentCategory:{type:String,default:""},searchRequestProp:{type:String,default:""},buttonText:{type:String,default:"Заказать"}},methods:Object(o["a"])({},Object(r["b"])(s["a"].catalog,[c["a"].catalog.ADD_TO_BASKET,c["a"].catalog.GET_PRODUCTS,c["a"].catalog.SEARCH]),Object(r["d"])(s["a"].catalog,[u["a"].catalog.REMOVE_FROM_BASKET]),{onBuy:function(t){this.isComponent?this.$emit("buy",t):this.addToBasket(t)},onOrdering:function(){this.$router.push({name:"ordering"})},onRemove:function(t){this.isComponent?this.$emit("basketRemove",t):this.removeFromBasket(t)}}),computed:Object(o["a"])({},Object(r["c"])(s["a"].catalog,["products","basket","lastChosenCategory","lastSearchRequest","searchResults"]),{searchResultWrapperMarginBottom:function(){return this.isBaskeWindowVisible?"230px":"0px"},categoryId:function(){return this.$route&&this.$route.params&&("catalog"===this.$route.name||"catalogWithSub"===this.$route.name)?this.$route.params.categoryId:null},subCategoryId:function(){return this.$route&&this.$route.params&&"catalogWithSub"===this.$route.name?this.$route.params.subCategoryId:""},searchRequest:function(){return this.$route&&this.$route.params&&"search"===this.$route.name?this.$route.params.request:0!==this.searchRequestProp.length?this.searchRequestProp:null}}),mounted:function(){var t=this;this.isLoading=!0,this.isComponent?0!==this.$props.category.length&&0===this.$props.parentCategory.length?this.getProducts({categoryId:this.$props.category}).then(function(){t.isLoading=!1}):0!==this.$props.parentCategory.length&&0!==this.$props.category.length&&this.getProducts({categoryId:this.$props.parentCategory,subCategoryId:this.$props.category}).then(function(){t.isLoading=!1}):"catalog"===this.$route.name||"catalogWithSub"===this.$route.name?this.getProducts({categoryId:this.categoryId,subCategoryId:this.subCategoryId}).then(function(){t.isLoading=!1}):"search"===this.$route.name&&this.search(this.searchRequest).then(function(){t.isLoading=!1})},destroyed:function(){}},D=V,j=(n("6b3c"),Object(b["a"])(D,i,a,!1,null,"0b9667d6",null));e["default"]=j.exports},"6b3c":function(t,e,n){"use strict";var i=n("1c6a"),a=n.n(i);a.a},"6bd7":function(t,e,n){},"76f5":function(t,e,n){},"85fe":function(t,e,n){"use strict";(function(t){var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=(function(){function t(t){this.value=t}function e(e){var n,i;function a(t,e){return new Promise(function(a,r){var s={key:t,arg:e,resolve:a,reject:r,next:null};i?i=i.next=s:(n=i=s,o(t,e))})}function o(n,i){try{var a=e[n](i),s=a.value;s instanceof t?Promise.resolve(s.value).then(function(t){o("next",t)},function(t){o("throw",t)}):r(a.done?"return":"normal",a.value)}catch(c){r("throw",c)}}function r(t,e){switch(t){case"return":n.resolve({value:e,done:!0});break;case"throw":n.reject(e);break;default:n.resolve({value:e,done:!1});break}n=n.next,n?o(n.key,n.arg):i=null}this._invoke=a,"function"!==typeof e.return&&(this.return=void 0)}"function"===typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)}}(),function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)};function r(t){var e=void 0;return e="function"===typeof t?{callback:t}:t,e}function s(t,e){var n=void 0,i=void 0,a=void 0,r=function(r){for(var s=arguments.length,c=Array(s>1?s-1:0),u=1;u<s;u++)c[u-1]=arguments[u];a=c,n&&r===i||(i=r,clearTimeout(n),n=setTimeout(function(){t.apply(void 0,[r].concat(o(a))),n=0},e))};return r._clear=function(){clearTimeout(n)},r}function c(t,e){if(t===e)return!0;if("object"===("undefined"===typeof t?"undefined":n(t))){for(var i in t)if(!c(t[i],e[i]))return!1;return!0}return!1}var u=function(){function t(e,n,a){i(this,t),this.el=e,this.observer=null,this.frozen=!1,this.createObserver(n,a)}return a(t,[{key:"createObserver",value:function(t,e){var n=this;this.observer&&this.destroyObserver(),this.frozen||(this.options=r(t),this.callback=this.options.callback,this.callback&&this.options.throttle&&(this.callback=s(this.callback,this.options.throttle)),this.oldResult=void 0,this.observer=new IntersectionObserver(function(t){var e=t[0];if(n.callback){var i=e.isIntersecting&&e.intersectionRatio>=n.threshold;if(i===n.oldResult)return;n.oldResult=i,n.callback(i,e),i&&n.options.once&&(n.frozen=!0,n.destroyObserver())}},this.options.intersection),e.context.$nextTick(function(){n.observer.observe(n.el)}))}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&this.options.intersection.threshold||0}}]),t}();function l(t,e,n){var i=e.value;if("undefined"===typeof IntersectionObserver)console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var a=new u(t,i,n);t._vue_visibilityState=a}}function h(t,e,n){var i=e.value,a=e.oldValue;if(!c(i,a)){var o=t._vue_visibilityState;o?o.createObserver(i,n):l(t,{value:i},n)}}function d(t){var e=t._vue_visibilityState;e&&(e.destroyObserver(),delete t._vue_visibilityState)}var p={bind:l,update:h,unbind:d};function f(t){t.directive("observe-visibility",p)}var y={version:"0.4.3",install:f},b=null;"undefined"!==typeof window?b=window.Vue:"undefined"!==typeof t&&(b=t.Vue),b&&b.use(y),e["a"]=y}).call(this,n("c8ba"))},ac78:function(t,e,n){"use strict";var i=n("6bd7"),a=n.n(i);a.a},ad3d:function(t,e,n){"use strict";var i=n("76f5"),a=n.n(i);a.a},be12:function(t,e,n){"use strict";var i=n("7b6f"),a=n("b7d9"),o="setUser",r="clearUser",s={SET_USER:o,CLEAR_USER:r};e["a"]={catalog:i["l"],waybills:a["f"],user:s}},bff5:function(t,e,n){"use strict";var i=n("ea34"),a=n.n(i);a.a},ea34:function(t,e,n){}}]);
//# sourceMappingURL=chunk-03734046.08ca6e6e.js.map