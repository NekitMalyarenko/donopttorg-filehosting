(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c459014"],{"0258":function(t,e,i){"use strict";var n=i("ba22"),a=i.n(n);a.a},"0c5e":function(t,e,i){},"1f89":function(t,e,i){},2209:function(t,e,i){"use strict";var n=i("5278"),a=i.n(n);a.a},"240a":function(t,e,i){},"247d":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return 0===t.error.length?i("section",{staticClass:"layout"},[t.$route&&"catalog"===t.$route.name?i("h1",{staticClass:"title"},[t._v(t._s(t.categoryId))]):t._e(),t.$route&&"search"===t.$route.name?i("h1",{staticClass:"title"},[t._v('"'+t._s(t.searchRequest)+'"')]):t._e(),"catalog"!==t.$route.name&&"catalogWithSub"!==t.$route.name&&!t.isComponent||null===t.categoryId||0===t.products.length?t._e():i("div",{staticClass:"search-result-wrapper",style:{"margin-bottom":t.searchResultWrapperMarginBottom},attrs:{id:"grid"}},t._l(t.products,function(e){return i("Card",{key:e.id,attrs:{id:e.id,name:e.name,options:e.options,"children-data":e.childrenData,"button-text":t.componentData?t.componentData.buttonText:"Заказать","basket-data":t.basketData},on:{buy:t.onBuy}})}),1),"search"!==t.$route.name&&!t.isComponent||0===t.products.length||null===t.searchRequest?t._e():i("div",{staticClass:"search-result-wrapper",style:{"margin-bottom":t.searchResultWrapperMarginBottom},attrs:{id:"grid"}},t._l(t.products,function(e){return i("Card",{key:e.id,attrs:{id:e.id,name:e.name,options:e.options,"children-data":e.childrenData,"button-text":t.componentData?t.componentData.buttonText:"Заказать"},on:{buy:t.onBuy}})}),1),i("div",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:t.onBottomReached,expression:"onBottomReached"}],staticClass:"spinner"},[t.isLoading?i("LoadingSpinner"):t._e()],1),i("Basket",{attrs:{data:t.isComponent?t.basketData:t.basket,"can-be-ordered":!t.isComponent},on:{ordering:t.onOrdering,remove:t.onRemove}})],1):i("section",{staticClass:"layout"},[i("h1",{staticClass:"title"},[t._v(t._s(t.error))])])},a=[],s=(i("7f7f"),i("75fc")),o=(i("386d"),i("cebc")),r=i("2f62"),c=i("e5e2"),u=i("4ccc"),l=i("be12"),d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"card"},[i("div",{staticClass:"header"},[i("p",{staticClass:"title",class:{"title-minified":t.name.length>45}},[t._v(t._s(t.name))]),0!==t.optionsLayers.length?i("section",{staticClass:"title-sub-container"},t._l(t.optionsLayers,function(e,n){return i("section",{key:n,staticClass:"option"},[e.length>1?i("SimpleDroplist",{attrs:{data:e},on:{choose:function(e){return t.changeChosenOption(n,e)}}}):i("p",[t._v(t._s(e[0]))])],1)}),0):t._e()]),i("LazyLoadImage",{staticClass:"main-image",attrs:{url:t.currentImage},on:{click:t.imageHandler}}),0!==t.lastOptionLayer.data.length?i("div",{staticClass:"content",style:t.cardContentStyle},t._l(t.lastOptionLayer.data,function(e,n){return i("div",{key:e.name,staticClass:"option"},[i("p",{staticClass:"name",class:{chosen:n===t.lastOptionLayer.chosenIndex},on:{click:function(e){t.lastOptionLayer.chosenIndex=n}}},[t._v("\n                "+t._s(e.name)+"\n            ")]),i("p",{staticClass:"quantity",class:{"chosen-quantity":n===t.lastOptionLayer.chosenIndex},on:{click:function(e){t.lastOptionLayer.chosenIndex=n}}},[t._v("\n                "+t._s(t.computedChildrenData[e.id].isCountInStockTooBig?">"+t.computedChildrenData[e.id].countInStock:t.computedChildrenData[e.id].countInStock)+" "),i("span",[t._v("шт.")])])])}),0):t._e(),i("div",{staticClass:"bottom"},[i("MDRaisedButton",{attrs:{text:t.buttonText},on:{click:function(e){return t.buyHandler()}}}),0!==t.optionsLayers.length?i("p",{staticClass:"price"},[t._v(t._s(t.currentOptionPrice)+" ₴")]):t._e()],1)],1)},h=[],p=(i("7514"),i("a4bb")),m=i.n(p),f=i("f499"),b=i.n(f),g=(i("ac6a"),i("c5f6"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"droplist-container",on:{mouseup:function(e){t.isVisible=!0},mouseleave:function(e){t.isVisible=!1}}},[i("p",{staticClass:"trigger"},[t._v("\n        "+t._s(t.$props.data[t.chosenIndex])+"\n        "),t.isVisible?i("img",{attrs:{src:"/svgs/caret-up.svg"}}):i("img",{attrs:{src:"/svgs/caret-down.svg"}})]),t.isVisible?i("div",{staticClass:"content"},t._l(t.dataToRender,function(e){return i("p",{key:e,on:{click:function(i){return t.clickHandler(e)}}},[t._v(t._s(e))])}),0):t._e()])}),y=[],v={name:"SimpleDroplist",props:{data:{type:Array,required:!0}},data:function(){return{chosenIndex:0,isVisible:!1}},methods:{clickHandler:function(t){for(var e=0;e<this.$props.data.length;e++)t===this.$props.data[e]&&(this.chosenIndex=e,this.$emit("choose",e),this.isVisible=!1)}},computed:{dataToRender:function(){return this.data}},watch:{data:function(t,e){if(t.length===e.length)for(var i=0;i<t.length;i++)t[i]!==e[i]&&(this.chosenIndex=0);else this.chosenIndex=0}}},C=v,k=(i("d35f"),i("2877")),O=Object(k["a"])(C,g,y,!1,null,"3b43d364",null),_=O.exports,I=i("f8b7"),x=i("06b1"),$=i("7032"),w=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("img",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:t.onVisibilityChanged,expression:"onVisibilityChanged"}],ref:"img",style:{width:t.width+"px",height:t.height+"px"},attrs:{url:t.url},on:{click:function(e){return t.$emit("click")}}})},L=[],B=i("2b0e"),E=i("85fe");B["a"].use(E["a"]);var S={name:"LazyLoadImage",data:function(){return{isLoaded:!1,isVisible:!1}},props:{url:{type:String,required:!0},width:{type:Number},height:{type:Number}},methods:{callback:function(t){this.isLoaded=!0,this.$refs.img.src=t},onVisibilityChanged:function(t){this.isVisible=t,t&&!this.isLoaded&&0!==this.url.length&&this.loadImage()},loadImage:function(){I["a"].$emit(I["b"].lazyLoadImage,{url:this.url,callback:this.callback,priority:1})}},watch:{url:function(t){this.isVisible&&(0!==t.length?this.loadImage():this.$refs.img.src="")}}},T=S,D=(i("bff5"),Object(k["a"])(T,w,L,!1,null,"2e7638ec",null)),M=D.exports,R={name:"CatalogCard",components:{LazyLoadImage:M,MDRaisedButton:$["a"],SimpleDroplist:_},props:{id:{type:Number,required:!0},name:{type:String,required:!0},options:{type:Array,required:!0},childrenData:{type:Object,required:!0},buttonText:{type:String,required:!0},basketData:{type:Array,default:null}},data:function(){return{route:[],optionsLayers:[],eventBus:null,lastOptionLayer:{chosenIndex:0,data:[]},cardContentStyle:{gridTemplateColumns:"repeat(auto-fit, minmax(30px, max-content))"}}},methods:{changeChosenOption:function(t,e){this.route[t]=e,this.reCalculateOptionsLayer()},imageHandler:function(){this.eventBus.$emit(I["b"].showImagePreview,x["a"].fullSizeImageURL(this.currentOption.id))},buyHandler:function(){this.$emit("buy",{id:this.currentOption.id,name:this.currentOption.fullName,hasImage:this.currentOption.hasImage,priceRetail:this.currentOption.priceRetail,priceWholesale:this.currentOption.priceWholesale})},reCalculateOptionsLayer:function(){for(var t=this,e=[],i=[],n=this.options,a=0;a<this.route.length+1;a++)a!==this.route.length?function(){var i=[];n.forEach(function(t){i.push(t.name)}),e.push(i),n[t.route[a]]?n=n[t.route[a]].options:(n=n[0].options,t.route[a]=0)}():(i=n,this.lastOptionLayer.chosenIndex>i.length-1&&(this.lastOptionLayer.chosenIndex=0));this.optionsLayers=e,this.lastOptionLayer.data=i,this.reCalculateMaxOptionWidth()},calculateOptionsLayer:function(){var t=[],e=[],i=[],n=this.options;while(1){if(!(n[0].options&&n[0].options.length>0)){e=n;break}(function(){var e=[];n.forEach(function(t){e.push(t.name)}),t.push(e),i.push(0),n=n[0].options})()}this.optionsLayers=t,this.route=i,this.lastOptionLayer.data=e,this.reCalculateMaxOptionWidth()},reCalculateMaxOptionWidth:function(){var t=0,e=9;this.lastOptionLayer&&this.lastOptionLayer.data&&(this.lastOptionLayer.data.forEach(function(i){i.name.length*e>t&&(t=i.name.length*e)}),this.cardContentStyle.gridTemplateColumns="repeat(auto-fit, minmax("+t+"px, max-content))")}},computed:Object(o["a"])({},Object(r["c"])(c["a"].catalog,["basket"]),Object(r["c"])(c["a"].user,["pricesType"]),{computedChildrenData:function(){var t,e=JSON.parse(b()(this.childrenData));return t=this.basketData?this.basketData:this.basket,m()(e).forEach(function(i){var n=t.find(function(t){return t.id===i});n&&!e[i].isCountInStockTooBig&&(e[i].countInStock-=n.boughtQuantity)}),e},currentImage:function(){return this.hasImage?x["a"].imageURL(this.currentOption.id):""},hasImage:function(){return this.currentOption&&this.currentOption.hasImage},currentOption:function(){if(0!==this.lastOptionLayer.data.length)return this.childrenData[this.lastOptionLayer.data[this.lastOptionLayer.chosenIndex].id]},currentOptionPrice:function(){return this.currentOption?this.currentOption[this.pricesType]:"Нет цены"}}),mounted:function(){this.eventBus=I["a"],this.calculateOptionsLayer()}},j=R,V=(i("2993"),Object(k["a"])(j,d,h,!1,null,"736e8a39",null)),z=V.exports,P=i("e072");B["a"].use(E["a"]);var A=9,q="Ошибка загузки данных с сервера.",W={name:"Catalog",components:{LoadingSpinner:P["a"],Basket:function(){return Promise.resolve().then(i.bind(null,"deaa"))},Card:z},data:function(){return{isLoading:!0,hasMoreToLoad:!1,lastPageNumber:1,products:[],error:""}},props:{isComponent:{type:Boolean,default:!1},componentData:{type:Object,default:null},basketData:{type:Array,default:null}},methods:Object(o["a"])({},Object(r["b"])(c["a"].catalog,[u["a"].catalog.ADD_TO_BASKET,u["a"].catalog.GET_PRODUCTS,u["a"].catalog.GET_MORE_PRODUCTS,u["a"].catalog.SEARCH]),Object(r["d"])(c["a"].catalog,[l["a"].catalog.REMOVE_FROM_BASKET,l["a"].catalog.SET_IS_BASKET_MINIMIZED]),{init:function(){var t=this;if(this.isLoading=!0,this.searchRequest)this.search(this.searchRequest).then(function(e){t.hasMoreToLoad=!1,"data"in e?t.products=e.data:"err"in e&&(t.error=q)});else if(this.categoryId){var e;e=this.subCategoryId?{categoryId:this.categoryId,subCategoryId:this.subCategoryId,itemsPerPage:A}:{categoryId:this.categoryId,itemsPerPage:A},this.getProducts(e).then(function(e){"data"in e?(e.data.length===A&&(t.hasMoreToLoad=!0),t.products=e.data):"err"in e&&(t.hasMoreToLoad=!1,t.error=q)})}this.isLoading=!1},onBuy:function(t){this.setIsBasketMinimized(!1),this.isComponent?this.$emit("buy",t):this.addToBasket(t)},onOrdering:function(){this.$router.push({name:"ordering"})},onRemove:function(t){this.isComponent?this.$emit("basketRemove",t):this.removeFromBasket(t)},onBottomReached:function(t){var e=this;!this.isLoading&&this.hasMoreToLoad&&0===this.error.length&&t&&this.categoryId&&(this.isLoading=!0,this.lastPageNumber++,this.getMoreProducts({categoryId:this.categoryId,subCategoryId:this.subCategoryId,pageNumber:this.lastPageNumber,itemsPerPage:9}).then(function(t){var i=t.data,n=t.hasMore;e.hasMoreToLoad=n,e.products=[].concat(Object(s["a"])(e.products),Object(s["a"])(i)),e.isLoading=!1}))}}),computed:Object(o["a"])({},Object(r["c"])(c["a"].catalog,["basket"]),{searchResultWrapperMarginBottom:function(){return this.isBaskeWindowVisible?"230px":"0px"},categoryId:function(){return this.$route&&this.$route.params&&("catalog"===this.$route.name||"catalogWithSub"===this.$route.name)?this.$route.params.categoryId:this.$props.componentData&&this.$props.componentData.category&&0!==this.$props.componentData.category.length?this.$props.componentData.category:null},subCategoryId:function(){return null!==this.$route&&null!==this.$route.params&&"catalogWithSub"===this.$route.name?this.$route.params.subCategoryId:this.$props.componentData&&this.$props.componentData.subCategory&&0!==this.$props.componentData.subCategory.length?this.$props.componentData.subCategory:null},searchRequest:function(){return null!==this.$route&&null!==this.$route.params&&"search"===this.$route.name?this.$route.params.request:this.$props.componentData&&this.$props.componentData.searchRequest&&0!==this.$props.componentData.searchRequest.length?this.$props.componentData.searchRequest:null}}),watch:{$route:{handler:function(){this.init()},deep:!0,immediate:!0}},mounted:function(){},destroyed:function(){}},N=W,H=(i("2209"),Object(k["a"])(N,n,a,!1,null,"d6b90022",null));e["default"]=H.exports},"24e7":function(t,e,i){"use strict";var n=i("e2af"),a=i.n(n);a.a},2993:function(t,e,i){"use strict";var n=i("1f89"),a=i.n(n);a.a},5278:function(t,e,i){},"85fe":function(t,e,i){"use strict";(function(t){var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=(function(){function t(t){this.value=t}function e(e){var i,n;function a(t,e){return new Promise(function(a,o){var r={key:t,arg:e,resolve:a,reject:o,next:null};n?n=n.next=r:(i=n=r,s(t,e))})}function s(i,n){try{var a=e[i](n),r=a.value;r instanceof t?Promise.resolve(r.value).then(function(t){s("next",t)},function(t){s("throw",t)}):o(a.done?"return":"normal",a.value)}catch(c){o("throw",c)}}function o(t,e){switch(t){case"return":i.resolve({value:e,done:!0});break;case"throw":i.reject(e);break;default:i.resolve({value:e,done:!1});break}i=i.next,i?s(i.key,i.arg):n=null}this._invoke=a,"function"!==typeof e.return&&(this.return=void 0)}"function"===typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)}}(),function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}),a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)};function o(t){var e=void 0;return e="function"===typeof t?{callback:t}:t,e}function r(t,e){var i=void 0,n=void 0,a=void 0,o=function(o){for(var r=arguments.length,c=Array(r>1?r-1:0),u=1;u<r;u++)c[u-1]=arguments[u];a=c,i&&o===n||(n=o,clearTimeout(i),i=setTimeout(function(){t.apply(void 0,[o].concat(s(a))),i=0},e))};return o._clear=function(){clearTimeout(i)},o}function c(t,e){if(t===e)return!0;if("object"===("undefined"===typeof t?"undefined":i(t))){for(var n in t)if(!c(t[n],e[n]))return!1;return!0}return!1}var u=function(){function t(e,i,a){n(this,t),this.el=e,this.observer=null,this.frozen=!1,this.createObserver(i,a)}return a(t,[{key:"createObserver",value:function(t,e){var i=this;this.observer&&this.destroyObserver(),this.frozen||(this.options=o(t),this.callback=this.options.callback,this.callback&&this.options.throttle&&(this.callback=r(this.callback,this.options.throttle)),this.oldResult=void 0,this.observer=new IntersectionObserver(function(t){var e=t[0];if(i.callback){var n=e.isIntersecting&&e.intersectionRatio>=i.threshold;if(n===i.oldResult)return;i.oldResult=n,i.callback(n,e),n&&i.options.once&&(i.frozen=!0,i.destroyObserver())}},this.options.intersection),e.context.$nextTick(function(){i.observer.observe(i.el)}))}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&this.options.intersection.threshold||0}}]),t}();function l(t,e,i){var n=e.value;if("undefined"===typeof IntersectionObserver)console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var a=new u(t,n,i);t._vue_visibilityState=a}}function d(t,e,i){var n=e.value,a=e.oldValue;if(!c(n,a)){var s=t._vue_visibilityState;s?s.createObserver(n,i):l(t,{value:n},i)}}function h(t){var e=t._vue_visibilityState;e&&(e.destroyObserver(),delete t._vue_visibilityState)}var p={bind:l,update:d,unbind:h};function m(t){t.directive("observe-visibility",p)}var f={version:"0.4.3",install:m},b=null;"undefined"!==typeof window?b=window.Vue:"undefined"!==typeof t&&(b=t.Vue),b&&b.use(f),e["a"]=f}).call(this,i("c8ba"))},"986a":function(t,e,i){"use strict";var n=i("0c5e"),a=i.n(n);a.a},a355:function(t,e,i){"use strict";var n=i("240a"),a=i.n(n);a.a},ac0c:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"layout"},[0!==t.categories.length?i("ExpandableList",{attrs:{data:t.dataToBind},on:{choose:t.onCategoryChoose,expand:t.onCategoryExpand}}):t._e(),i("Basket",{attrs:{data:t.isComponent?t.basketData:t.basket,"can-be-ordered":!t.isComponent},on:{ordering:t.onBasketOrdering,remove:t.onBasketRemove}})],1)},a=[],s=(i("ac6a"),i("f499")),o=i.n(s),r=i("cebc"),c=i("2f62"),u=i("4ccc"),l=i("be12"),d=i("e5e2"),h=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"expandable-list"},t._l(t.data,function(e){return i("ExpandableListItem",{key:e.id,attrs:{id:e.id,name:e.name,children:e.children,"is-expanded":e.isExpanded},on:{choose:t.onChoose,expand:t.onExpand}})}),1)},p=[],m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"item-wrapper"},[i("div",{staticClass:"item",on:{click:t.clickHandler}},[i("p",[t._v(t._s(t.name))]),!t.isChildrenVisible&&t.hasChilren?i("img",{attrs:{src:"/svgs/caret-down.svg"}}):t._e(),t.isChildrenVisible&&t.hasChilren?i("img",{attrs:{src:"/svgs/caret-up.svg"}}):t._e()]),t.hasChilren&&t.isChildrenVisible?i("section",{staticClass:"children"},t._l(t.children,function(e){return i("ExpandableListItem",{key:e.id,attrs:{name:e.name,children:e.children,id:e.id},on:{choose:t.onChoose}})}),1):t._e()])},f=[],b=(i("7f7f"),{name:"ExpandableListItem",props:{id:{type:String,required:!0},name:{type:String,require:!0},children:{type:Array,required:!1},isExpanded:{type:Boolean,required:!1}},data:function(){return{isChildrenVisible:!1}},methods:{clickHandler:function(){this.children?(this.isChildrenVisible=!this.isChildrenVisible,this.$emit("expand",this.id)):this.$emit("choose",{id:this.id,name:this.name})},onChoose:function(t){t.subId=t.id,t.id=this.id,this.$emit("choose",t)}},computed:{hasChilren:function(){return this.children&&0!==this.children.length}},mounted:function(){null!==this.isExpanded&&void 0!==this.isExpanded&&(this.isChildrenVisible=this.isExpanded)}}),g=b,y=(i("a355"),i("2877")),v=Object(y["a"])(g,m,f,!1,null,"328dc628",null),C=v.exports,k={name:"ExpandableList",components:{ExpandableListItem:C},props:{data:{type:Array,require:!0}},methods:{onChoose:function(t){this.$emit("choose",t)},onExpand:function(t){this.$emit("expand",t)}}},O=k,_=(i("986a"),Object(y["a"])(O,h,p,!1,null,"0e1c8988",null)),I=_.exports,x=i("deaa"),$={name:"CategoryChoose",components:{Basket:x["default"],ExpandableList:I},props:{isComponent:{type:Boolean,default:!1},basketData:{type:Array,default:null}},methods:Object(r["a"])({},Object(c["b"])(d["a"].catalog,[u["a"].catalog.LOAD_CATEGORIES]),Object(c["d"])(d["a"].catalog,[l["a"].catalog.REMOVE_FROM_BASKET]),{onCategoryChoose:function(t){this.isComponent?this.$emit("choose",{category:t.id,subCategory:t.subId}):t.subId?this.$router.push({path:"/catalog/".concat(t.id,"/").concat(t.subId)}):this.$router.push({path:"/catalog/".concat(t.id)})},onCategoryExpand:function(t){this.isComponent||this.$store.commit(d["a"].catalog+"/"+l["a"].catalog.CHOOSE_CATEGORY,t)},onBasketRemove:function(t){this.isComponent?this.$emit("basketRemove",t):this.removeFromBasket(t)},onBasketOrdering:function(){this.$router.push({name:"ordering"})}}),computed:Object(r["a"])({},Object(c["c"])(d["a"].catalog,["basket","categories","chosenCategory"]),{rawCategories:function(){var t=JSON.parse(o()(this.categories));return t.forEach(function(t){t.isExpanded&&(t.isExpanded=!1)}),t},dataToBind:function(){return this.isComponent?this.rawCategories:this.categories}}),created:function(){0===this.categories.length&&this.loadCategories()}},w=$,L=(i("0258"),Object(y["a"])(w,n,a,!1,null,"2c218267",null));e["default"]=L.exports},ba22:function(t,e,i){},bff5:function(t,e,i){"use strict";var n=i("ea34"),a=i.n(n);a.a},d35f:function(t,e,i){"use strict";var n=i("ff66"),a=i.n(n);a.a},deaa:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"basket-wrapper"},[t.isBasketWindowVisible?i("div",{staticClass:"basket",class:{"basket-minimized":t.isBasketWindowMinimizedComputed},attrs:{id:"basket"}},[i("div",{staticClass:"top-bar"},[t.isBasketWindowMinimizedComputed?t._e():i("img",{staticClass:"clickable",attrs:{src:"/svgs/window-minimize-big-white.svg"},on:{click:function(e){return t.onWindowMinimize(!0)}}}),t.isBasketWindowMinimizedComputed?i("img",{staticClass:"clickable",attrs:{src:"/svgs/window-minimize-small-white.svg"},on:{click:function(e){return t.onWindowMinimize(!1)}}}):t._e(),i("img",{staticClass:"clickable",attrs:{src:"/svgs/times-white.svg"},on:{click:t.closeBasket}})]),i("ProductsTable",{attrs:{data:t.data,"is-editable":!0,"is-full-size":!1,height:239},on:{remove:function(e){return t.$emit("remove",e)},quantityChange:t.onQuantityChange}}),i("div",{staticClass:"bottom"},[i("p",{staticClass:"totalSum"},[t._v("Итого: "),i("span",[t._v(t._s(t.basketTotalPrice)+"₴")])]),t.isBasketValid&&t.basketTotalPrice>0&&t.canBeOrdered?i("button",{staticClass:"right",on:{click:function(e){return t.$emit("ordering")}}},[t._v("Оформить")]):t._e()])],1):t._e()])},a=[],s=i("cebc"),o=i("2f62"),r=i("e5e2"),c=i("be12"),u=i("d777"),l={name:"Basket",components:{ProductsTable:u["a"]},props:{data:{type:Array,required:!0},isMinimized:{type:Boolean,default:null},onMinimize:{type:Function,default:null},canBeOrdered:{type:Boolean,default:!0}},data:function(){return{basketWindow:{height:null}}},methods:Object(s["a"])({},Object(o["d"])(r["a"].catalog,[c["a"].catalog.REMOVE_FROM_BASKET,c["a"].catalog.SET_IS_BASKET_MINIMIZED,c["a"].catalog.CLEAR]),{onQuantityChange:function(t){var e=t.item,i=t.newQuantity;e.boughtQuantity=i},closeBasket:function(){this.clear()},onWindowMinimize:function(t){this.onMinimize?this.onMinimize(t):this.setIsBasketMinimized(t)}}),computed:Object(s["a"])({},Object(o["c"])(r["a"].catalog,["basket","isBasketWindowMinimized","chosenCategory"]),Object(o["c"])(r["a"].user,["pricesType"]),{isBasketWindowMinimizedComputed:function(){return null!==this.isMinimized&&void 0!==this.isMinimized?this.isMinimized:this.isBasketWindowMinimized},isBasketWindowVisible:function(){return 0!==this.data.length},isBasketValid:function(){for(var t=this.data,e=0;e<t.length;e++)if(!t[e].isValid||!t[e].boughtQuantity)return!1;return!0},basketTotalPrice:function(){if(this.isBasketValid){for(var t=0,e=this.data,i=0;i<e.length;i++){var n=void 0;n=this.pricesType in e[i]?e[i][this.pricesType]:e[i].price,t+=n*e[i].boughtQuantity}return Math.round(1e3*t)/1e3}return-1}}),created:function(){},destroyed:function(){}},d=l,h=(i("24e7"),i("2877")),p=Object(h["a"])(d,n,a,!1,null,"c354353a",null);e["default"]=p.exports},e2af:function(t,e,i){},ea34:function(t,e,i){},ff66:function(t,e,i){}}]);
//# sourceMappingURL=chunk-1c459014.a9b1416b.js.map