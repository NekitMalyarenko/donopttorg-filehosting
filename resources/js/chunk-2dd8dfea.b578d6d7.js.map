{"version":3,"sources":["webpack:///./src/views/components/WaybillEditingDialog.vue?d890","webpack:///src/views/components/WaybillEditingDialog.vue","webpack:///./src/views/components/WaybillEditingDialog.vue?1d5d","webpack:///./src/views/components/WaybillEditingDialog.vue","webpack:///./src/views/components/WaybillEditingDialog.vue?fc7f"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","attrs","can-return","catalogData","category","length","searchRequest","on","hide","onDialogHide","return","onDialogReturn","staticClass","placeholder","type","autocorrect","autocapitalize","input","onSearchInput","keyup","$event","indexOf","_k","keyCode","key","onSearchResultChoose","target","value","searchHelperResults","_l","item","click","_v","_s","_e","data","rawCategories","basket","products","can-be-ordered","onCategoryChoose","category-id","sub-category-id","subCategory","search-request","button-text","basket-data","buy","onBuy","canBeOrdered","can-be-cleared","staticRenderFns","WaybillEditingDialogvue_type_script_lang_js_","name","components","Basket","CatalogComponent","CategoryChooseComponent","Dialog","props","productsData","Array","required","buttonText","methods","Object","objectSpread","vuex_esm","all_modules_name","catalog","all_actions_type","LOAD_CATEGORIES","all_mutations_type","SET_IS_BASKET_MINIMIZED","res","find","el","id","boughtQuantity","copy","JSON","parse","stringify_default","isValid","push","setIsBasketMinimized","event","_this","getSearchHelper","then","json","payload","subId","$store","dispatch","mutations_type","computed","categories","forEach","isExpanded","mounted","$props","loadCategories","components_WaybillEditingDialogvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_9_oneOf_1_0_node_modules_css_loader_index_js_ref_9_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_9_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_9_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_WaybillEditingDialog_vue_vue_type_style_index_0_id_87a95d84_lang_sass_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_9_oneOf_1_0_node_modules_css_loader_index_js_ref_9_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_9_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_9_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_WaybillEditingDialog_vue_vue_type_style_index_0_id_87a95d84_lang_sass_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-2dd8dfea.b578d6d7.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Dialog',{ref:\"dialog\",attrs:{\"can-return\":_vm.catalogData.category.length !== 0 || _vm.catalogData.searchRequest.length !== 0},on:{\"hide\":_vm.onDialogHide,\"return\":_vm.onDialogReturn}},[(_vm.catalogData.category === '' && _vm.catalogData.searchRequest === '')?_c('section',[_c('section',{staticClass:\"search-wrapper\"},[_c('div',{staticClass:\"search\"},[_c('input',{ref:\"searchInput\",attrs:{\"placeholder\":\"Поиск Товара\",\"type\":\"text\",\"autocorrect\":\"off\",\"autocapitalize\":\"off\"},on:{\"input\":_vm.onSearchInput,\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.onSearchResultChoose($event.target.value)}}}),(_vm.searchHelperResults.length !== 0 && _vm.catalogData.category === '')?_c('section',{staticClass:\"search-helper\"},_vm._l((_vm.searchHelperResults),function(item){return _c('p',{on:{\"click\":function($event){return _vm.onSearchResultChoose(item)}}},[_vm._v(_vm._s(item))])}),0):_vm._e()])]),_c('CategoryChooseComponent',{ref:\"categoryChoose\",staticClass:\"category-choose-component\",attrs:{\"data\":_vm.rawCategories,\"basket\":_vm.products,\"can-be-ordered\":false},on:{\"onCategoryChoose\":_vm.onCategoryChoose}})],1):_vm._e(),(_vm.catalogData.category !== '' || _vm.catalogData.searchRequest !== '')?_c('CatalogComponent',{staticClass:\"catalog-component\",attrs:{\"category-id\":_vm.catalogData.category,\"sub-category-id\":_vm.catalogData.subCategory,\"search-request\":_vm.catalogData.searchRequest,\"button-text\":\"Добавить\",\"basket-data\":_vm.products},on:{\"buy\":_vm.onBuy}}):_vm._e(),_c('Basket',{attrs:{\"data\":_vm.products,\"canBeOrdered\":false,\"can-be-cleared\":false}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <Dialog ref=\"dialog\" @hide=\"onDialogHide\" @return=\"onDialogReturn\"\r\n            v-bind:can-return=\"catalogData.category.length !== 0 || catalogData.searchRequest.length !== 0\">\r\n\r\n        <section v-if=\"catalogData.category === '' && catalogData.searchRequest === ''\">\r\n\r\n            <section class=\"search-wrapper\">\r\n                <div class=\"search\">\r\n                    <input placeholder=\"Поиск Товара\" type=\"text\" autocorrect=\"off\" autocapitalize=\"off\"\r\n                           @input=\"onSearchInput\" @keyup.enter=\"onSearchResultChoose($event.target.value)\"\r\n                           ref=\"searchInput\"/>\r\n\r\n                    <section class=\"search-helper\" v-if=\"searchHelperResults.length !== 0 && catalogData.category === ''\">\r\n                        <p v-for=\"item in searchHelperResults\" v-on:click=\"onSearchResultChoose(item)\">{{item}}</p>\r\n                    </section>\r\n                </div>\r\n            </section>\r\n\r\n            <CategoryChooseComponent class=\"category-choose-component\"\r\n                    v-bind:data=\"rawCategories\" v-bind:basket=\"products\"\r\n                    :can-be-ordered=\"false\" ref=\"categoryChoose\"\r\n                    @onCategoryChoose=\"onCategoryChoose\"\r\n            />\r\n\r\n        </section>\r\n\r\n        <CatalogComponent class=\"catalog-component\"\r\n                v-if=\"catalogData.category !== '' || catalogData.searchRequest !== ''\"\r\n                :category-id=\"catalogData.category\" :sub-category-id=\"catalogData.subCategory\"\r\n                :search-request=\"catalogData.searchRequest\"\r\n                button-text=\"Добавить\" :basket-data=\"products\"\r\n                @buy=\"onBuy\"\r\n        />\r\n\r\n        <!--<Catalog v-if=\"catalogData.category !== '' || catalogData.searchRequest !== ''\"\r\n                 :is-component=\"true\" :component-data=\"catalogData\"\r\n                 :basket-data=\"products\"\r\n                 @buy=\"onBuy\" @basketRemove=\"onRemove\"\r\n        />-->\r\n\r\n        <Basket v-bind:data=\"products\" :canBeOrdered=\"false\" :can-be-cleared=\"false\"/>\r\n    </Dialog>\r\n</template>\r\n\r\n<script>\r\n    import { mapGetters, mapActions, mapMutations } from 'vuex';\r\n    import mutations from \"../../store/all.mutations.type\"\r\n    import actions from \"../../store/all.actions.type\";\r\n    import modules from \"../../store/all.modules.name\"\r\n\r\n    import Dialog from \"./Dialog\"\r\n    import {CatalogAPI} from \"../../api/catalog\"\r\n\r\n    import {CLEAR_PRODUCTS} from \"../../store/modules/catalog/mutations.type\";\r\n    import CategoryChooseComponent from \"./CategoryChooseComponent\";\r\n    import CatalogComponent from \"./CatalogComponent\";\r\n    import Basket from \"./Basket\";\r\n\r\n    export default {\r\n        name: \"WaybillEditingDialog\",\r\n\r\n        components: {Basket, CatalogComponent, CategoryChooseComponent, Dialog},\r\n\r\n        props: {\r\n            productsData: {\r\n                type: Array,\r\n                required: true,\r\n            },\r\n        },\r\n\r\n        data: () => {\r\n            return {\r\n                catalogData: {\r\n                    category: \"\",\r\n                    subCategory: \"\",\r\n                    searchRequest: \"\",\r\n                    buttonText: \"Добавить\",\r\n                },\r\n\r\n                searchHelperResults: [],\r\n\r\n                products: [],\r\n            }\r\n        },\r\n\r\n        methods: {\r\n            ...mapActions(modules.catalog, [\r\n                actions.catalog.LOAD_CATEGORIES,\r\n            ]),\r\n\r\n            ...mapMutations(modules.catalog, [\r\n                mutations.catalog.SET_IS_BASKET_MINIMIZED,\r\n            ]),\r\n\r\n            onBuy(item) {\r\n                let res = this.products.find((el) => {\r\n                    return el.id === item.id;\r\n                });\r\n\r\n                if (res) {\r\n                    res.boughtQuantity++;\r\n                } else {\r\n                    let copy = JSON.parse(JSON.stringify(item));\r\n                    copy.boughtQuantity = 1;\r\n                    copy.isValid = true;\r\n                    this.products.push(copy);\r\n                }\r\n\r\n                this.setIsBasketMinimized(false);\r\n            },\r\n\r\n            onSearchInput(event) {\r\n                let value = event.target.value;\r\n                if (value.length !== 0) {\r\n                    CatalogAPI.getSearchHelper(value).then((res) => {\r\n\r\n                        if (res !== null) {\r\n                            res.json().then(data => {\r\n                                this.searchHelperResults = data;\r\n                            });\r\n                        } else {\r\n                            this.searchHelperResults = [];\r\n                        }\r\n\r\n                    });\r\n                } else if (this.searchHelperResults.length !== 0) {\r\n                    this.searchHelperResults = [];\r\n                }\r\n            },\r\n\r\n            onSearchResultChoose(item) {\r\n                this.catalogData.searchRequest = item;\r\n                this.searchHelperResults = [];\r\n            },\r\n\r\n            onCategoryChoose(payload) {\r\n                this.catalogData.category = payload.id;\r\n                this.catalogData.subCategory = payload.subId;\r\n                this.searchHelperResults = [];\r\n            },\r\n\r\n            onDialogReturn() {\r\n                this.$store.dispatch(modules.catalog + \"/\" + CLEAR_PRODUCTS);\r\n                this.catalogData.category = '';\r\n                this.catalogData.subCategory = '';\r\n                this.catalogData.searchRequest = '';\r\n            },\r\n\r\n            onDialogHide() {\r\n                this.catalogData.category = '';\r\n                this.catalogData.subCategory = '';\r\n                this.catalogData.searchRequest = '';\r\n            },\r\n        },\r\n\r\n        computed: {\r\n            ...mapGetters(modules.catalog, [\r\n                \"categories\",\r\n            ]),\r\n\r\n            rawCategories: function () {\r\n                let res = JSON.parse(JSON.stringify(this.categories));\r\n                res.forEach((item) => {\r\n                    if (item.isExpanded) {\r\n                        item.isExpanded = false;\r\n                    }\r\n                });\r\n                return res;\r\n            },\r\n        },\r\n\r\n        mounted() {\r\n            this.products = this.$props.productsData ? this.$props.productsData : [];\r\n\r\n            if (this.categories.length === 0) {\r\n                this.loadCategories();\r\n            }\r\n\r\n        },\r\n    }\r\n</script>\r\n\r\n<style lang=\"sass\" scoped>\r\n\r\n    .catalog-component\r\n        width: 90%\r\n        max-width: 1200px\r\n        margin: auto\r\n\r\n    .category-choose-component\r\n        width: 90%\r\n        max-width: 500px\r\n        margin: auto\r\n\r\n    .search-wrapper\r\n        border-bottom: 2px solid #1d5db5\r\n\r\n        .search\r\n            display: flex\r\n            position: relative\r\n            justify-content: center\r\n            width: 90%\r\n            margin: auto\r\n            max-width: 500px\r\n            font-family: Roboto, sans-serif\r\n\r\n            input\r\n                display: block\r\n                width: 100%\r\n                height: 100%\r\n                border: none\r\n                font-size: 1.3rem\r\n                padding-bottom: 10px\r\n                padding-top: 10px\r\n                outline: none\r\n\r\n            .search-helper\r\n                position: absolute\r\n                top: 43px\r\n                left: auto\r\n                right: auto\r\n                width: 100%\r\n                box-shadow: 0 20px 20px 0 #0000003d\r\n                border-bottom-left-radius: 5px\r\n                border-bottom-right-radius: 5px\r\n                background-color: #FFFFFF\r\n                transition: 0.25s\r\n\r\n                p\r\n                    font-size: 18px\r\n                    padding-left: 10px\r\n                    margin: 0\r\n                    padding-top: 1rem\r\n                    padding-bottom: 1rem\r\n\r\n                    &:hover\r\n                        background-color: #f2f2f2\r\n                        cursor: pointer\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WaybillEditingDialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WaybillEditingDialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WaybillEditingDialog.vue?vue&type=template&id=87a95d84&scoped=true&\"\nimport script from \"./WaybillEditingDialog.vue?vue&type=script&lang=js&\"\nexport * from \"./WaybillEditingDialog.vue?vue&type=script&lang=js&\"\nimport style0 from \"./WaybillEditingDialog.vue?vue&type=style&index=0&id=87a95d84&lang=sass&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"87a95d84\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WaybillEditingDialog.vue?vue&type=style&index=0&id=87a95d84&lang=sass&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WaybillEditingDialog.vue?vue&type=style&index=0&id=87a95d84&lang=sass&scoped=true&\""],"sourceRoot":""}